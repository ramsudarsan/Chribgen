(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(26)},,,,,,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/Loading.d78d121f.gif"},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(2),l=a.n(s),c=(a(14),a(3)),u=a(4),o=a(6),i=a(5),h=a(7),m=(a(16),a(17),a(19),function(e){var t=e.updateSearch;return n.a.createElement("div",null,n.a.createElement("input",{id:"searchbar",type:"search",onInput:t}))}),d=(a(21),a(23),function(e){var t=e.result;return n.a.createElement("div",{className:"result-div"},n.a.createElement("p",{className:"resultnumber"}," ",t[0]," "),n.a.createElement("ul",{className:"result-list"},n.a.createElement("li",{className:"titleelement"},n.a.createElement("strong",null,"Title:")," ",t[1]),n.a.createElement("li",{className:"authorelement"},n.a.createElement("strong",null,"Author(s):")," ",t[2]),n.a.createElement("a",{className:"download",href:t[3],target:"_blank"},n.a.createElement("li",null,"Download"))))}),g=function(e){var t=e.results,r=e.fetchInProgress,s=e.hasMore,l=e.nextResults,c=e.hasPrevious,u=e.previousResults;return!0===r?n.a.createElement("div",{className:"center-results"},n.a.createElement("p",null," Results: "),n.a.createElement("img",{className:"loading",src:a(25)})):!1===s?!0===c?n.a.createElement("div",{className:"center-results"},n.a.createElement("p",null," Results: "),t.map(function(e,t){return n.a.createElement(d,{key:t,result:e})}),n.a.createElement("div",{className:"buttonContainer"},n.a.createElement("button",{className:"previousButton",onClick:u},"Previous"))):n.a.createElement("div",{className:"center-results"},n.a.createElement("p",null," Results: "),t.map(function(e,t){return n.a.createElement(d,{key:t,result:e})})):!0===s?!0===c?n.a.createElement("div",{className:"center-results"},n.a.createElement("p",null," Results: "),t.map(function(e,t){return n.a.createElement(d,{key:t,result:e})}),n.a.createElement("div",{className:"buttonContainer"},n.a.createElement("button",{className:"previousButton",onClick:u},"Previous"),n.a.createElement("button",{className:"nextButton",onClick:l},"Next"))):n.a.createElement("div",{className:"center-results"},n.a.createElement("p",null," Results: "),t.map(function(e,t){return n.a.createElement(d,{key:t,result:e})}),n.a.createElement("div",{className:"buttonContainer"},n.a.createElement("button",{className:"nextButton",onClick:l},"Next"))):void 0},p=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(i.a)(t).call(this))).updateSearch=function(t,a){fetch("http://gen.lib.rus.ec/search.php?req=".concat(t,"&phrase=1&view=simple&column=def&sort=title&sortmode=DESC&page=").concat(a)).then(function(e){return e.text()}).then(function(r){if(t===e.state.searchValue){for(var n=(new DOMParser).parseFromString(r,"text/html"),s=n.querySelectorAll('[title = "Gen.lib.rus.ec"]'),l=n.querySelectorAll('[href *= "book/index.php?md5="]'),c=n.querySelectorAll("td"),u=[],o=0;o<c.length;o++){for(var i=c[o].getElementsByTagName("a"),h=[],m=0;m<i.length;m++)(i[m].getAttribute("href").includes("column=author")||i[m].getAttribute("href").includes("column[]=author"))&&h.push(i[m]);h.length>0&&u.push(h)}for(var d=[],g=0;g<s.length;g++){for(var p="",f=g+1,v=l[g].innerText,E=s[g].getAttribute("href"),b=0;b<u[g].length;b++)b===u[g].length-1?p+=u[g][b].innerText:p+=u[g][b].innerText+", ";var N=[f,v,p,E];d.push(N)}for(var P=n.querySelectorAll('[href *= "&page="]'),S=!1,w=!1,x=0;x<P.length;x++)console.log(P[x].getAttribute("href")),P[x].getAttribute("href").includes("&page="+(a+1))&&(S=!0),P[x].getAttribute("href").includes("&page="+(a-1))&&(w=!0);e.setState({searchResults:d,fetchInProgress:!1,hasMore:S,hasPrevious:w,currentPage:a})}})},e.updateSearchHandler=function(t){var a=t.target.value;e.setState({searchValue:t.target.value,fetchInProgress:!0}),e.updateSearch(a,1)},e.getNextResults=function(){var t=e.state.searchValue;e.setState({fetchInProgress:!0}),e.updateSearch(t,e.state.currentPage+1)},e.getPreviousResults=function(){var t=e.state.searchValue;e.setState({fetchInProgress:!0}),e.updateSearch(t,e.state.currentPage-1)},e.state={searchValue:"",searchResults:[],fetchInProgress:!1,currentPage:0,hasMore:!1,hasPrevious:!1},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(m,{updateSearch:this.updateSearchHandler}),n.a.createElement(g,{fetchInProgress:this.state.fetchInProgress,results:this.state.searchResults,hasMore:this.state.hasMore,hasPrevious:this.state.hasPrevious,nextResults:this.getNextResults,previousResults:this.getPreviousResults}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(p,null),document.getElementById("root"));chrome.runtime.sendMessage({msg:"give me searchValue pls"},function(e){document.getElementById("searchbar").value=e.searchVal,e.searchVal.length>0&&document.getElementById("searchbar").dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[8,2,1]]]);
//# sourceMappingURL=main.e0ce2b52.chunk.js.map